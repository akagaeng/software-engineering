<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. -->
			  
			  <project basedir="." default="build" name="pm_secure_server">
    <property environment="env"/>
    <property name="ECLIPSE_HOME" value="../../../../../../eclipse/"/>
    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.8"/>
    <property name="source" value="1.8"/>
   <path id="Web App Libraries.libraryclasspath">
         <pathelement location="WebContent/WEB-INF/lib/activation.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/aopalliance-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/asm-3.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/aspectjweaver.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cglib-2.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cobertura-2.1.1-javadoc.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cobertura-2.1.1-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cobertura-2.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-beanutils-core-1.8.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-collections-3.2.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-dbcp-1.4.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-fileupload-1.2.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-io-1.4.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-lang-2.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-logging-1.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-pool-1.5.5.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-pool-1.5.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/ezmorph-1.0.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hamcrest-core-1.3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/ibatis-2.3.0.677.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/json-lib-2.4-jdk15.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jstl-1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/junit-4.12.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/log4j-1.2.16.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/log4jdbc4-1.2beta2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/mail.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/mysql-connector-java-5.1.5-bin.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/poi-3.7-20101029.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/servlet-api.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/sitemesh-2.4.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/slf4j-api-1.6.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/slf4j-log4j12-1.6.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-aop-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-asm-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-beans-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-context-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-core-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-expression-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-jdbc-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-modules-validation-0.9.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-orm.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-tx-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-web-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-webmvc-3.0.4.RELEASE.jar"/>
    </path>
    <path id="EAR Libraries.libraryclasspath"/>
    <path id="Apache Tomcat v8.0 [Apache Tomcat v8.0].libraryclasspath">
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/**"/>
		<pathelement location="C:/APM_Setup/Server/Tomcat8/lib/annotations-api.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/catalina-ant.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/catalina-ha.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/catalina-storeconfig.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/catalina-tribes.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/catalina.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/commons-codec-1.5.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/commons-net-2.0.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/cos.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/ecj-4.4.2.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/el-api.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/jasper-el.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/jasper.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/jsp-api.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/mysql-connector-java-5.0.8-bin.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/servlet-api.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-api.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-coyote.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-dbcp.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-i18n-es.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-i18n-fr.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-i18n-ja.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-jdbc.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-jni.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-util-scan.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-util.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/tomcat-websocket.jar"/>
        <pathelement location="C:/APM_Setup/Server/Tomcat8/lib/websocket-api.jar"/>
    </path>
    <path id="pm_secure_server.classpath">
        <pathelement location="build/classes"/>
        <path refid="Web App Libraries.libraryclasspath"/>
        <path refid="EAR Libraries.libraryclasspath"/>
        <path refid="Apache Tomcat v8.0 [Apache Tomcat v8.0].libraryclasspath"/>
    </path>
    <target name="init">
        <mkdir dir="build/classes"/>
        <copy includeemptydirs="false" todir="build/classes">
            <fileset dir="src">
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
    </target>
    <target name="clean">
        <delete dir="build/classes"/>
    </target>
    <target depends="clean" name="cleanall"/>
    <target depends="build-subprojects,build-project" name="build"/>
    <target name="build-subprojects"/>
    <target depends="init" name="build-project">
        <echo message="${ant.project.name}: ${ant.file}"/>
        <javac debug="true" debuglevel="${debuglevel}" destdir="build/classes" includeantruntime="false" source="${source}" target="${target}" encoding="UTF-8">
            <src path="src"/>
            <classpath refid="pm_secure_server.classpath"/>
        </javac>
    </target>
    <target description="Build all projects which reference this project. Useful to propagate changes." name="build-refprojects"/>
    <target description="copy Eclipse compiler jars to ant lib directory" name="init-eclipse-compiler">
        <copy todir="${ant.library.dir}">
            <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
        </copy>
        <unzip dest="${ant.library.dir}">
            <patternset includes="jdtCompilerAdapter.jar"/>
            <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
        </unzip>
    </target>
    <target description="compile project with Eclipse compiler" name="build-eclipse-compiler">
        <property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter"/>
        <antcall target="build"/>
    </target>
	<target name="war" depends="build">
		<war needxmlfile="false"
			 basedir="C:\APM_Setup\Server\Tomcat8\webapps\ROOT\pm_secure_server\WebContent"
			 destfile="C:\APM_Setup\Server\Tomcat8\webapps\pm_secure_server.war">
			<exclude name="WEB-INF/${build.dir}/**"/>
			<exclude name="WEB-INF/src/**"/>
		</war>
	</target>

	<property name="checkstyle.home" value="C:\checkstyle-6.5"/>
	<target name="report.checkstyle" description="Generate a report of convention violations.">
			<taskdef resource="checkstyletask.properties" classpath="${checkstyle.home}/checkstyle-6.5-all.jar" />
			<available file="${checkstyle.home}/checkstyle-6.5-all.jar" property="checkstyle.available" />
			<fail unless="checkstyle.available" message="Error: checkstyle." />
			<checkstyle config="${checkstyle.home}/config/checkstyle_checks.xml" failureProperty="checkstyle.failure" failOnViolation="false">
				<formatter type="xml" tofile="C:\Program Files (x86)\Jenkins\jobs\pm\workspace\pm_secure_server\checkstyle_report.xml" />
				<fileset dir="src" includes="**/*java" />
				</checkstyle>
		</target>

	<property name="pmd.home" value="C:\pmd-bin-5.3.0" />
	<property name="report.dir" location="${basedir}" /> 

	<path id="run.classpath"><pathelement location="${bin.dir}" /></path>
	<path id="pmd.classpath"><pathelement location="${build}" />
		   <fileset dir="${pmd.home}/lib/" >
			  <include name="*.jar" />
		   </fileset>
	</path>

	<taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="pmd.classpath" />
    <target name="report.pmd">
       <pmd rulesetfiles="${pmd.home}/rulesets/rulesets.xml">
	   <formatter type="xml" toFile="${report.dir}/pmd_report.xml" />
		  <fileset dir="src/">
		  <include name="**/*" /><!--<include name="**/*java" />-->
		  </fileset>
		</pmd>
	</target>





<!--<property name="findbugs.home" value="C:\Program Files (x86)\Jenkins\plugins\findbugs\WEB-INF" />-->

<property name="findbugs.home" value="C:\findbugs-3.0.1"/>
<property name="report.findbugs.dir" location="C:\Program Files (x86)\Jenkins\jobs\pm\workspace\pm_secure_server" />

	<path id="findbugs.classpath">
		<pathelement location="${build}" />
		<fileset dir="${findbugs.home}/lib/">
				<include name="*.jar" />
		   </fileset>
	</path>


  <target name="findbugs" description="Run code analysis over code to check for problems." depends="build">
    	<taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask" classpathref="findbugs.classpath" />
    	<findbugs home="${findbugs.home}" output="xml:withMessages" outputFile="${report.findbugs.dir}\findbugs_report.xml">
    		<sourcePath path="src" />
    		<class location="build/classes" />
				<!--<class location="C:\findbugs-3.0.1\lib\bcel-6.0-SNAPSHOT.jar" />-->
    		</findbugs>
    	</target>

		<!--
     <target name="report.findbugs" description="Generate a report." >
     	<xslt in="${report.findbugs.dir}/findbugs_report.xml" style="${findbugs.home}/src/xsl/fancy.xsl" out="${report.findbugs.dir}/findbugs-default-html" />
     	</target>
-->
</project>
